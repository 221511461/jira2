buildNumber: 0.0.2
name: Github For Jira
description: Connect app for integrating GitHub into Jira
organization: Engineering-DevOps
notifications:
  email: "fusion-arc@atlassian.com"

links:
  healthcheck:
    uri: /healthcheck
  source:
    url: https://github.com/atlassian-forks/github-for-jira.git

compose:
  microservice:
    image: docker.atl-paas.net/atlassian/github-for-jira
    ports:
      - 8080:8080
    tag: 0.0.2

cleanup: true

resources:

  # see https://hello.atlassian.net/wiki/spaces/MICROS/pages/169250118/Redis%2BResource%2BType
  - type: redis
    name: cache
    attributes:
      snapshotRetention: 0
      config:
        maxmemory-policy: allkeys-lru

  # see https://hello.atlassian.net/wiki/spaces/MICROS/pages/169250380/Postgres%2BResource%2BType
  - type: postgres-db
    name: database

  # see https://hello.atlassian.net/wiki/spaces/MICROS/pages/449950508/Global%2BEdge%2BResource%2BType
  - type: globaledge
    name: ingress

config:
  environmentVariables:
    NODE_ENV: test
    PORT: "8080"

scaling:
  min: 1
  max: 1
  instanceCount: 1
  instance: t3.small
